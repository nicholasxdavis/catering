<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FARMesilla | Catering Services | Mesilla, NM</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#f5e7d0',
            primary2: '#e8d9c0',
            secondary: '#33251e',
            w: '#fff',
            b: '#000',
            accent: '#432f25'
          },
          fontFamily: {
            title: ['"Bernard MT Condensed"', 'serif'],
            body: ['"Adabi MT Light"', 'sans-serif']
          }
        }
      }
    }
</script>

<link href="https://db.onlinewebfonts.com/c/a552118ceee33dff8a6acab5d1c10b60?family=Bernard+MT+Condensed+V1" rel="stylesheet">
<link href="https://db.onlinewebfonts.com/c/0828325a5d135368bf470ed1f2e68d63?family=Abadi+MT+Std+Light" rel="stylesheet">

<style>
    /* Bernard MT Condensed */
@font-face {
  font-family: 'Bernard MT Condensed';
  src: url('https://db.onlinewebfonts.com/t/a552118ceee33dff8a6acab5d1c10b60.eot');
  src: url('https://db.onlinewebfonts.com/t/a552118ceee33dff8a6acab5d1c10b60.eot?#iefix') format('embedded-opentype'),
       url('https://db.onlinewebfonts.com/t/a552118ceee33dff8a6acab5d1c10b60.woff2') format('woff2'),
       url('https://db.onlinewebfonts.com/t/a552118ceee33dff8a6acab5d1c10b60.woff') format('woff'),
       url('https://db.onlinewebfonts.com/t/a552118ceee33dff8a6acab5d1c10b60.ttf') format('truetype'),
       url('https://db.onlinewebfonts.com/t/a552118ceee33dff8a6acab5d1c10b60.svg#Bernard MT Condensed V1') format('svg');
  font-style: normal;
  font-display: swap;
}

/* Abadi MT Light */
@font-face {
  font-family: 'Abadi MT Std Light';
  src: url('https://db.onlinewebfonts.com/t/0828325c...63.eot');
  src: url('https://db.onlinewebfonts.com/t/0828325c...63.eot?#iefix') format('embedded-opentype'),
       url('https://db.onlinewebfonts.com/t/0828325c...63.woff2') format('woff2'),
       url('https://db.onlinewebfonts.com/t/0828325c...63.woff') format('woff'),
       url('https://db.onlinewebfonts.com/t/0828325c...63.ttf') format('truetype'),
       url('https://db.onlinewebfonts.com/t/0828325c...63.svg#Abadi MT Std Light') format('svg');
  font-style: normal;
  font-display: swap;
}
body {
  background-color: #f5e7d0;
  background-image: url('https://www.transparenttextures.com/patterns/soft-wallpaper.png');
  background-repeat: repeat;
  background-size: auto;
  position: relative;
}

body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-image: url('https://www.transparenttextures.com/patterns/soft-wallpaper.png');
  opacity: 0.1;
  pointer-events: none;
  z-index: 0;
}

body {
  font-family: 'Adabi MT Light', sans-serif;
  letter-spacing: 0.02em;
}

h1, h2, h3, h4, p1 {
  font-family: 'Bernard MT Condensed', serif;
  font-weight: 500;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.section-content {
  position: relative;
  z-index: 2;
}

.menu-item-image {
  width: 96px;
  height: 96px;
  object-fit: cover;
  border-radius: 8px;
  border: 2px solid #c8b697;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background: white;
  border-radius: 8px;
  padding: 2rem;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
}

.close-btn {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
}

.hidden { display: none; }

.editable-item {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
  background: #f9fafb;
}

.edit-form input, .edit-form textarea, .edit-form select {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}

.save-btn, .edit-btn, .delete-btn, .cancel-btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-right: 0.5rem;
  margin-bottom: 0.5rem;
}

.save-btn { background: #10b981; color: white; }
.edit-btn { background: #3b82f6; color: white; }
.delete-btn { background: #ef4444; color: white; }
.cancel-btn { background: #6b7280; color: white; }

.collapsible-content {
  transition: max-height 0.3s ease-out;
  overflow: hidden;
}

.toggle-arrow {
  display: inline-block;
  transition: transform 0.3s ease;
}
</style>
</head>

<nav class="bg-b top-0 z-50 shadow-md">
    <div class="container mx-auto px-4 sm:px-6 py-3 md:py-4">
        <div class="flex items-center justify-between">
            <!-- Logo/Brand -->
            <div class="flex items-center">
                <a href="#" class="flex items-center">
                    <img src="assets/logo.png" alt="FARMesilla" class="h-28 md:h-28">
                </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="text-primary text-sm md:text-base tracking-wider hover:text-accent transition duration-300 font-title">HOME</a>
                <a href="menu.html" class="text-primary text-sm md:text-base tracking-wider hover:text-accent transition duration-300 font-title">MENU</a>
                <a href="events.html" class="text-primary text-sm md:text-base tracking-wider hover:text-accent transition duration-300 font-title">EVENTS</a>
                <a href="about.html" class="text-primary text-sm md:text-base tracking-wider hover:text-accent transition duration-300 font-title">ABOUT</a>
                <a href="contact.html" class="text-primary text-sm md:text-base tracking-wider hover:text-accent transition duration-300 font-title">CONTACT</a>
                <a href="catering.html" class="bg-primary text-secondary px-4 py-2 rounded-full hover:text-primary hover:bg-accent transition duration-300 text-sm tracking-wider font-title">CATERING</a>
            </div>

            <!-- Mobile menu button -->
            <div class="md:hidden flex items-center space-x-4">
                <button type="button" class="mobile-menu-button text-primary focus:outline-none">
                    <!-- Hamburger icon (hidden when menu is open) -->
                    <svg class="h-6 w-6 hamburger-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                    <!-- Close icon (hidden when menu is closed) -->
                    <svg class="h-6 w-6 close-icon hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile menu (hidden by default) -->
        <div class="mobile-menu hidden md:hidden pt-4 pb-2">
            <div class="flex flex-col items-center justify-center space-y-3 text-center">
                <a href="index.html" class="block px-3 py-2 hover:text-accent text-primary text-sm tracking-wider font-title">HOME</a>
                <a href="menu.html" class="block px-3 py-2 hover:text-accent text-primary text-sm tracking-wider font-title">MENU</a>
                <a href="events.html" class="block hover:text-accent px-3 py-2 text-primary text-sm tracking-wider font-title">EVENTS</a>
                <a href="about.html" class="block px-3 py-2 hover:text-accent text-primary text-sm tracking-wider font-title">ABOUT</a>
                <a href="contact.html" class="block px-3 py-2 hover:text-accent text-primary text-sm tracking-wider font-title">CONTACT</a>
                <a href="catering.html" class="block hover:text-accent bg-primary text-secondary text-center px-4 py-2 rounded-full text-sm tracking-wider mt-2 font-title">CATERING</a>
            </div>
        </div>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const mobileMenu = document.querySelector('.mobile-menu');
    const hamburgerIcon = document.querySelector('.hamburger-icon');
    const closeIcon = document.querySelector('.close-icon');

    mobileMenuButton.addEventListener('click', function() {
        // Toggle mobile menu visibility
        mobileMenu.classList.toggle('hidden');
        
        // Toggle hamburger and close icons
        hamburgerIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
        
        // Optional: prevent body scrolling when menu is open
        document.body.classList.toggle('overflow-hidden');
    });

    // Close menu when clicking on a link (optional)
    const mobileMenuLinks = document.querySelectorAll('.mobile-menu a');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', function() {
            mobileMenu.classList.add('hidden');
            hamburgerIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        });
    });
});
</script>



<body class="text-secondary"
  style="background-color: #f5dfbf ;
         background-image: url('https://www.transparenttextures.com/patterns/soft-wallpaper.png');
         background-repeat: repeat;
         background-size: auto;
         background-blend-mode: multiply;">

<section id="events" class="py-12 md:py-16">
    <div class="container mx-auto px-4 sm:px-6 max-w-6xl">
        <!-- Section Header -->
        <div class="mb-10 text-center">
            <h1 class="text-3xl md:text-4xl font-display mb-4 tracking-wider text-secondary">UPCOMING EVENTS</h1>
            <p class="text-secondary text-sm sm:text-base max-w-2xl mx-auto transition-all duration-300 hover:text-secondary/90">
            There’s always something happening at FARMesilla! From local tastings and seasonal pop-ups to live music, workshops, and community gatherings.
        </p>
            
        </div>

        <!-- Mobile Events Info (Hidden on desktop) -->
        <div id="mobile-events-top" class="lg:hidden mb-6">
            <!-- Content will be populated by JavaScript -->
        </div>

        <!-- Calendar + Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
            <!-- Calendar - Wider Column -->
            <div class="lg:col-span-2 bg-primary/10 p-6 rounded-lg border border-secondary/20">
                <div id="enhanced-calendar"></div>
            </div>
            
            <!-- Current Event Info - Now Dynamic (Hidden on mobile) -->
            <div class="lg:col-span-1 hidden lg:block">
                <div id="next-event-container" class="bg-primary/10 p-6 rounded-lg border border-secondary/20 mb-6">
                    <p class="text-secondary">Loading events...</p>
                </div>
                
                <!-- Upcoming Events Cards -->
                <h3 class="text-lg font-display mb-4 tracking-wider border-b border-secondary/20 pb-2">COMING SOON</h3>
                <div id="upcoming-events-container" class="space-y-4">
                    <p class="text-secondary">Loading upcoming events...</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FullCalendar -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>

<script>
document.addEventListener('DOMContentLoaded', async function() {
    // Cache busting for the events JSON
    const eventsUrl = 'https://nicholasxdavis.github.io/cards-img/Events/events.json?v=' + new Date().getTime();
    
    // Fetch events from JSON
    let eventsData = [];
    try {
        const response = await fetch(eventsUrl);
        const data = await response.json();
        eventsData = data.events;
        
const eventsForCalendar = data.events.map(event => {
    const eventDate = new Date(event.date + (event.time ? 'T' + convertTo24Hour(event.time.split(' - ')[0]) : ''));
    const isPastEvent = eventDate < new Date();
    
    return {
        title: event.title,
        start: event.date + (event.time ? 'T' + convertTo24Hour(event.time.split(' - ')[0]) : ''),
        extendedProps: {
            description: event.description,
            location: event.location,
            time: event.time,
            type: event.type,
            options: event.options,
            ticketlink: event.ticketlink,
            event_details: event.event_details
        },
        backgroundColor: '#33251e',
        borderColor: '#33251e',
        allDay: !event.time,
        className: isPastEvent ? 'past-event' : '' // Changed from classNames to className
    };
});
        // Initialize Calendar
        const calendarEl = document.getElementById('enhanced-calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'title',
                right: 'prev,next'
            },
            height: 'auto',
            fixedWeekCount: false,
            dayMaxEventRows: true,
            events: eventsForCalendar,
            dayCellContent: function(arg) {
                const hasEvent = calendar.getEvents().some(event => {
                    const eventDate = event.start ? new Date(event.start) : null;
                    return eventDate && eventDate.toDateString() === arg.date.toDateString();
                });
                
                const dateEl = document.createElement('div');
                dateEl.className = 'fc-daygrid-day-number';
                
                if (hasEvent) {
                    const dotEl = document.createElement('div');
                    dotEl.className = 'fc-event-dot';
                    dateEl.appendChild(dotEl);
                }
                
                const numberEl = document.createElement('span');
                numberEl.textContent = arg.dayNumberText;
                dateEl.appendChild(numberEl);
                
                return { domNodes: [dateEl] };
            },
            eventContent: function(arg) {
                const titleContainer = document.createElement('div');
                titleContainer.className = 'fc-event-title-container';
                titleContainer.innerHTML = `<span class="fc-event-title">${arg.event.title}</span>`;
                return { domNodes: [titleContainer] };
            },
            eventDisplay: 'block',
            eventTimeFormat: {
                hour: 'numeric',
                minute: '2-digit',
                meridiem: 'short'
            },
            dayCellDidMount: function(arg) {
                // Add click handler to date cells
                arg.el.addEventListener('click', function() {
                    const clickedDate = arg.date;
                    const eventsOnDate = calendar.getEvents().filter(event => {
                        const eventDate = event.start ? new Date(event.start) : null;
                        return eventDate && eventDate.toDateString() === clickedDate.toDateString();
                    });
                    
                    if (eventsOnDate.length > 0) {
                        const event = eventsOnDate[0];
                        const originalEventData = eventsData.find(e => e.title === event.title && e.date === event.startStr.split('T')[0]);
                        showEventDetailsPopup(originalEventData);
                    }
                });
            }
        });

        calendar.render();

        // Add click handlers to "More Details" buttons
        document.addEventListener('click', function(e) {
            if (e.target.closest('.more-details-btn')) {
                const eventCard = e.target.closest('[data-event-title]');
                if (eventCard) {
                    const eventTitle = eventCard.getAttribute('data-event-title');
                    const eventDate = eventCard.getAttribute('data-event-date');
                    const originalEventData = eventsData.find(e => e.title === eventTitle && e.date === eventDate);
                    if (originalEventData) {
                        showEventDetailsPopup(originalEventData);
                    }
                }
            }
        });

        // Find and display events
        function updateEventDisplays() {
            const now = new Date();
            const allEvents = calendar.getEvents();
            const futureEvents = allEvents.filter(event => {
                const eventDate = event.start ? new Date(event.start) : null;
                return eventDate && eventDate >= now;
            });
            
            // Sort by date (closest first)
            futureEvents.sort((a, b) => new Date(a.start) - new Date(b.start));
            
            const nextEventContainer = document.getElementById('next-event-container');
            const upcomingEventsContainer = document.getElementById('upcoming-events-container');
            const mobileEventsTop = document.getElementById('mobile-events-top');
            
            // Clear containers
            nextEventContainer.innerHTML = '';
            upcomingEventsContainer.innerHTML = '';
            mobileEventsTop.innerHTML = '';
            
            if (futureEvents.length > 0) {
                // Display next event (desktop)
                const nextEvent = futureEvents[0];
                const eventDate = new Date(nextEvent.start);
                const originalEventData = eventsData.find(e => e.title === nextEvent.title && e.date === nextEvent.startStr.split('T')[0]);
                
                // Desktop version
                nextEventContainer.innerHTML = `
                    <h2 class="text-xl font-display mb-3 tracking-wider">OUR NEXT EVENT</h2>
                    <div class="flex items-start">
                        <div class="bg-secondary text-primary text-center p-2 rounded-lg min-w-[70px] mr-4">
                            <div class="text-2xl font-bold">${eventDate.getDate()}</div>
                            <div class="text-xs">${eventDate.toLocaleString('default', { month: 'short' }).toUpperCase()}</div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-secondary">${nextEvent.title}</h3>
                            <p class="text-sm text-secondary/80 mb-2">${nextEvent.extendedProps.time || 'All Day'} • ${nextEvent.extendedProps.location}</p>
                            <p class="text-secondary">${nextEvent.extendedProps.description}</p>
                            <button class="more-details-btn mt-3 text-accent text-sm font-semibold flex items-center hover:underline" 
                                    data-event-title="${nextEvent.title}" 
                                    data-event-date="${nextEvent.startStr.split('T')[0]}">
                                More Details
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                
                // Mobile version (top section)
                mobileEventsTop.innerHTML = `
                    <div class="bg-primary/10 p-6 rounded-lg border border-secondary/20 mb-6">
                        <h2 class="text-xl font-display mb-3 tracking-wider">OUR NEXT EVENT</h2>
                        <div class="flex items-start">
                            <div class="bg-secondary text-primary text-center p-2 rounded-lg min-w-[60px] mr-4">
                                <div class="text-2xl font-bold">${eventDate.getDate()}</div>
                                <div class="text-xs">${eventDate.toLocaleString('default', { month: 'short' }).toUpperCase()}</div>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-secondary">${nextEvent.title}</h3>
                                <p class="text-sm text-secondary/80 mb-2">${nextEvent.extendedProps.time || 'All Day'} • ${nextEvent.extendedProps.location}</p>
                                <p class="text-secondary">${nextEvent.extendedProps.description}</p>
                                <button class="more-details-btn mt-3 text-accent text-sm font-semibold flex items-center hover:underline"
                                        data-event-title="${nextEvent.title}" 
                                        data-event-date="${nextEvent.startStr.split('T')[0]}">
                                    More Details
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <h3 class="text-lg font-display mb-4 tracking-wider border-b border-secondary/20 pb-2">COMING SOON</h3>
                    <div class="space-y-4">
                        ${futureEvents.slice(1, 3).map(event => {
                            const eventDate = new Date(event.start);
                            return `
                                <div class="bg-primary/10 p-4 rounded-lg border border-secondary/20 hover:bg-primary/20 transition">
                                    <div class="flex items-start">
                                        <div class="bg-secondary text-primary text-center p-2 rounded-lg min-w-[60px] mr-3">
                                            <div class="text-xl font-bold">${eventDate.getDate()}</div>
                                            <div class="text-xs">${eventDate.toLocaleString('default', { month: 'short' }).toUpperCase()}</div>
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-secondary">${event.title}</h4>
                                            <p class="text-xs text-secondary/80 mb-1">${event.extendedProps.time || 'All Day'} • ${event.extendedProps.location}</p>
                                            <p class="text-sm text-secondary/90">${event.extendedProps.description.substring(0, 60)}${event.extendedProps.description.length > 60 ? '...' : ''}</p>
                                            <button class="more-details-btn mt-2 text-accent text-sm font-semibold flex items-center hover:underline"
                                                    data-event-title="${event.title}" 
                                                    data-event-date="${event.startStr.split('T')[0]}">
                                                More Details
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 ml-1" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                
                // Display upcoming events (desktop - next 2 after the first one)
                const upcomingEvents = futureEvents.slice(1, 3);
                if (upcomingEvents.length > 0) {
                    upcomingEventsContainer.innerHTML = upcomingEvents.map(event => {
                        const eventDate = new Date(event.start);
                        return `
                            <div class="bg-primary/10 p-4 rounded-lg border border-secondary/20 hover:bg-primary/20 transition">
                                <div class="flex items-start">
                                    <div class="bg-secondary text-primary text-center p-2 rounded-lg min-w-[60px] mr-3">
                                        <div class="text-xl font-bold">${eventDate.getDate()}</div>
                                        <div class="text-xs">${eventDate.toLocaleString('default', { month: 'short' }).toUpperCase()}</div>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-secondary">${event.title}</h4>
                                        <p class="text-xs text-secondary/80 mb-1">${event.extendedProps.time || 'All Day'} • ${event.extendedProps.location}</p>
                                        <p class="text-sm text-secondary/90">${event.extendedProps.description.substring(0, 60)}${event.extendedProps.description.length > 60 ? '...' : ''}</p>
                                        <button class="more-details-btn mt-2 text-accent text-sm font-semibold flex items-center hover:underline"
                                                data-event-title="${event.title}" 
                                                data-event-date="${event.startStr.split('T')[0]}">
                                            More Details
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 ml-1" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                } else {
                    upcomingEventsContainer.innerHTML = '<p class="text-secondary">No other upcoming events</p>';
                }
            } else {
                const noEventsMsg = `
                    <h2 class="text-xl font-display mb-3 tracking-wider">OUR NEXT EVENT</h2>
                    <p class="text-secondary">No upcoming events scheduled. Check back soon!</p>
                `;
                nextEventContainer.innerHTML = noEventsMsg;
                mobileEventsTop.innerHTML = noEventsMsg;
                upcomingEventsContainer.innerHTML = '<p class="text-secondary">No upcoming events</p>';
            }

            // Adjust calendar height to match content
            setTimeout(() => {
                const calendarContainer = document.querySelector('.lg\\:col-span-2');
                const sidebarContainer = document.querySelector('.lg\\:col-span-1');
                
                if (window.innerWidth >= 1024) {
                    const calendarHeight = calendarContainer.offsetHeight;
                    const sidebarHeight = sidebarContainer.offsetHeight;
                    
                    if (sidebarHeight > calendarHeight) {
                        calendarEl.style.height = `${sidebarHeight}px`;
                    } else {
                        calendarEl.style.height = 'auto';
                    }
                }
            }, 100);
        }

        // Show event details popup
        function showEventDetailsPopup(eventData) {
            const detailsPopup = document.createElement('div');
            detailsPopup.className = 'fixed inset-0 flex items-center justify-center bg-black/50 z-50';
            detailsPopup.innerHTML = `
                <div class="bg-primary2 border border-secondary/20 rounded-lg p-6 w-80 md:w-[30rem] max-w-[90vw] mx-4 relative">
                    <button class="absolute top-2.5 right-2.5 text-secondary hover:text-accent text-3xl leading-none w-8 h-8 flex items-center justify-center focus:outline-none close-popup">
                        &times;
                    </button>
                    <div class="text-center">
                        <h4 class="font-medium text-lg mb-4">${eventData.title}</h4>
                        <div class="text-left mb-4">
                            <p class="text-sm mb-2"><strong>Date:</strong> ${eventData.date}</p>
                            ${eventData.time ? `<p class="text-sm mb-2"><strong>Time:</strong> ${eventData.time}</p>` : ''}
                            <p class="text-sm mb-2"><strong>Location:</strong> ${eventData.location}</p>
                            <p class="text-sm mb-4"><strong>Description:</strong> ${eventData.description}</p>
                            ${eventData.event_details ? `<div class="bg-primary/10 p-3 rounded border border-secondary/20 mb-4">
                                <p class="text-sm">${eventData.event_details}</p>
                            </div>` : ''}
                        </div>
                        ${eventData.options === 'tickets' ? `
                        <a href="${eventData.ticketlink}" target="_blank" class="bg-secondary text-white hover:bg-accent px-4 py-2 rounded-md transition-colors inline-block">
                            Buy Tickets
                        </a>
                        ` : ''}
                    </div>
                </div>
            `;
            document.body.appendChild(detailsPopup);
            
            // Close popup handlers
            const closeBtn = detailsPopup.querySelector('.close-popup');
            closeBtn.addEventListener('click', () => detailsPopup.remove());
            
            detailsPopup.addEventListener('click', (e) => {
                if (e.target === detailsPopup) detailsPopup.remove();
            });
        }

        // Initial display
        updateEventDisplays();

        // Update when calendar navigates
        calendar.on('datesSet', function() {
            updateEventDisplays();
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            updateEventDisplays();
        });

    } catch (error) {
        console.error('Error loading events:', error);
    }

    // Helper function to convert 12-hour time to 24-hour format
    function convertTo24Hour(time12h) {
        const [time, modifier] = time12h.split(' ');
        let [hours, minutes] = time.split(':');
        if (hours === '12') hours = '00';
        if (modifier === 'PM') hours = parseInt(hours, 10) + 12;
        return `${hours}:${minutes}:00`;
    }
});

// Remove scroll wheel from calendar
document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('enhanced-calendar');
    if (calendarEl) {
        calendarEl.addEventListener('wheel', function(e) {
            e.preventDefault();
        }, { passive: false });
    }
});
</script>

<style>
/* Enhanced Calendar Styles */
#enhanced-calendar {
    --fc-border-color: rgba(51, 37, 30, 0.2);
    --fc-page-bg-color: transparent;
    --fc-daygrid-day-bg-color: transparent;
    height: auto !important;
    overflow: visible !important;
}

.fc .fc-toolbar-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    color: #33251e;
    font-weight: 700;
    letter-spacing: 0.05em;
}

.fc .fc-button {
    background: #362821;
    border: 1px solid #362821;
    color: #f5e7d0;
    padding: 0.3rem 0.8rem;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.fc .fc-button:hover {
    background: #432f25;
    border-color: #432f25;
    color: #f5e7d0;
}

.fc .fc-button:active,
.fc .fc-button:focus {
    outline: none;
    box-shadow: none;
}

.fc .fc-daygrid-day-number {
    color: #33251e;
    font-weight: 500;
    font-size: 0.95rem;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    width: 28px;
    height: 28px;
    margin-left: auto;
    margin-right: 4px;
}

.fc-event-dot {
    position: absolute;
    width: 28px;
    height: 28px;
    background-color: rgba(239, 68, 68, 0.2);
    border-radius: 50%;
    z-index: -1;
    right: 0;
}

.fc .fc-daygrid-day {
    position: relative;
    background-color: transparent !important;
}

.fc .fc-daygrid-day-frame {
    min-height: 80px;
    display: flex;
    flex-direction: column;
}

.fc .fc-daygrid-day-top {
    flex-direction: row;
    justify-content: space-between;
    padding: 4px;
}

/* Event title styling */
.fc-event-title-container {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    text-align: center;
    padding: 0 4px;
}

/* Add this to your existing styles */
.fc-event.past-event .fc-event-title {
    text-decoration: line-through;
    text-decoration-color: rgba(239, 68, 68, 0.7);
    opacity: 0.8;
}

/* Remove the existing .fc-event-title styles and replace with: */
.fc-event-title {
    display: inline-block;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 0.75rem;
    font-weight: 500;
    color: #33251e;
    text-decoration: none;
}

.fc .fc-daygrid-day-events {
    margin: 0;
    position: static;
}

.fc .fc-col-header-cell {
    padding: 10px 0;
}

.fc .fc-col-header-cell-cushion {
    color: #33251e;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.8rem;
    letter-spacing: 0.05em;
}

/* Mobile-specific styles */
@media (max-width: 1023px) {
    #mobile-events-top {
        display: block;
    }
    
    .lg\\:col-span-1.hidden {
        display: none;
    }
    
    .fc .fc-toolbar-title {
        font-size: 1.2rem;
    }
    
    .fc-event-title {
        font-size: 0.65rem;
    }
    
    .fc .fc-daygrid-day-frame {
        min-height: 60px;
    }
}

@media (max-width: 640px) {
    .fc-event-title {
        display: none;
    }
    
    .fc .fc-daygrid-day-frame {
        min-height: 40px;
    }
    
    #mobile-events-top {
        margin-bottom: 1rem;
    }
}

/* Desktop-specific styles */
@media (min-width: 1024px) {
    #mobile-events-top {
        display: none;
    }
    
    .lg\\:col-span-1.hidden {
        display: block;
    }
    
    .grid.grid-cols-1.lg\\:grid-cols-3 {
        align-items: stretch;
    }
}
</style>

<!-- Annual Events Section -->
<section id="annual-events" class="py-12 md:py-16 ">
    <div class="container mx-auto px-4 sm:px-6 max-w-6xl">
        <!-- Section Header -->
        <div class="mb-10 text-center">
            <h1 class="text-3xl md:text-4xl font-display mb-4 tracking-wider text-secondary">ANNUAL EVENTS</h1>
            <p class="text-secondary mt-4 max-w-2xl mx-auto">Join us for these special traditions we hold dear each year</p>
        </div>

        <!-- Events Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Event 1 -->
            <div class="bg-primary/20 rounded-lg border border-secondary/20 hover:bg-primary/30 transition duration-300 overflow-hidden">
                <!-- Image Container -->
                <div class="h-48 overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1544025162-d76694265947" 
                         alt="Adovada de Mesilla event" 
                         class="w-full h-full object-cover transition-transform duration-500 hover:scale-105">
                </div>
                <!-- Content -->
                <div class="p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-secondary text-primary text-center p-3 rounded-lg min-w-[60px] mr-4">
                            <div class="text-xl font-bold">MAY</div>
                        </div>
                        <h3 class="font-bold text-lg text-secondary">Adovada de Mesilla</h3>
                    </div>
                    <p class="text-secondary mb-4">This friendly competition brings together the region's talented chefs to showcase their unique takes on traditional adovada.</p>
                    <div class="flex items-center text-sm text-secondary/80">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>May. 31st</span>
                    </div>
                    <div class="flex items-center text-sm text-secondary/80 mt-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span>FARMesilla</span>
                    </div>
                </div>
            </div>

            <!-- Event 2 -->
            <div class="bg-primary/20 rounded-lg border border-secondary/20 hover:bg-primary/30 transition duration-300 overflow-hidden">
                <!-- Image Container -->
                <div class="h-48 overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1506368083636-6defb67639a7" 
                         alt="Harvest Fest event" 
                         class="w-full h-full object-cover transition-transform duration-500 hover:scale-105">
                </div>
                <!-- Content -->
                <div class="p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-secondary text-primary text-center p-3 rounded-lg min-w-[60px] mr-4">
                            <div class="text-xl font-bold">OCT</div>
                        </div>
                        <h3 class="font-bold text-lg text-secondary">Harvest Fest</h3>
                    </div>
                    <p class="text-secondary mb-4">Join us on Oct. 26th for our Annual Fall Harvest Festivities!</p>
                    <div class="flex items-center text-sm text-secondary/80">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>Oct. 26th</span>
                    </div>
                    <div class="flex items-center text-sm text-secondary/80 mt-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span>FARMesilla</span>
                    </div>
                </div>
            </div>

            <!-- Event 3 -->
            <div class="bg-primary/20 rounded-lg border border-secondary/20 hover:bg-primary/30 transition duration-300 overflow-hidden">
                <!-- Image Container -->
                <div class="h-48 overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1513889961551-628c1e5e2ee9" 
                         alt="Winter Solstice event" 
                         class="w-full h-full object-cover transition-transform duration-500 hover:scale-105">
                </div>
                <!-- Content -->
                <div class="p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-secondary text-primary text-center p-3 rounded-lg min-w-[60px] mr-4">
                            <div class="text-xl font-bold">DEC</div>
                        </div>
                        <h3 class="font-bold text-lg text-secondary">Winter Solstice</h3>
                    </div>
                    <p class="text-secondary mb-4">Warm up with mulled cider, seasonal treats, and fireside storytelling as we celebrate the longest night.</p>
                    <div class="flex items-center text-sm text-secondary/80">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>Dec. 21st</span>
                    </div>
                    <div class="flex items-center text-sm text-secondary/80 mt-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span>FARMesilla</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Call to Action -->
        <div class="text-center mt-12">
            <p class="text-secondary mb-6">Want to be notified when tickets go on sale for these events?</p>
            <a href="#contact" class="bg-secondary text-primary px-6 py-3 rounded-full hover:bg-accent transition duration-300 inline-block font-title tracking-wider">
                JOIN OUR MAILING LIST
            </a>
        </div>
    </div>
</section>

<footer class="bg-b text-primary py-12 md:py-16">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 md:gap-12">
            <!-- Logo and Social -->
            <div class="md:col-span-1 flex flex-col items-center md:items-start">
                <img src="assets/logo.png" alt="FARMesilla" class="h-32 mb-4">
                <div class="flex space-x-4">

                </div>
                <p class="text-xs text-center md:text-left">#FARMesilla</p>
                <p class="text-xs text-center md:text-left">#eatgoodfeelgood</p>
                <p class="text-xs text-center md:text-left">#eatgoodworkhappy</p>
            </div>

            <!-- Quick Links -->
            <div class="text-center md:text-left">
                <h3 class="font-title text-lg mb-4 tracking-wider border-b border-secondary/20 pb-2">QUICK LINKS</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-accent transition duration-300 text-sm">Home</a></li>
                    <li><a href="#catering-menu" class="hover:text-accent transition duration-300 text-sm">Catering Menu</a></li>
                    <li><a href="#" class="hover:text-accent transition duration-300 text-sm">Our Story</a></li>
                    <li><a href="#" class="hover:text-accent transition duration-300 text-sm">Gallery</a></li>
                    <li><a href="#" class="hover:text-accent transition duration-300 text-sm">Contact Us</a></li>
                </ul>
            </div>

            <!-- Contact Info -->
            <div class="text-center md:text-left">
                <h3 class="font-title text-lg mb-4 tracking-wider border-b border-secondary/20 pb-2">CONTACT US</h3>
                <address class="not-italic text-sm space-y-2">
                    <p>1840 Avenida de Mesilla<br> Mesilla, NM 88005</p>
                    <p>Phone: (575) 652-4626</p>
                    <p>Email: farmstore@farmesilla.com</p>
                </address>
            </div>

            <!-- Hours -->
            <div class="text-center md:text-left">
                <h3 class="font-title text-lg mb-4 tracking-wider border-b border-secondary/20 pb-2">HOURS</h3>
                <ul class="text-sm space-y-2">
                    <li>Mon-Tue: Closed</li>
                    <li>Wednesday: 9am - 4pm</li>
                    <li>Thu-Sat: 9am - 7pm</li>
                    <li>Sunday: 9am - 4pm</li>
                </ul>
                <div class="mt-4">
                    <a href="#catering-form" class="inline-block bg-primary text-secondary px-4 py-2 rounded-full hover:text-primary hover:bg-accent transition duration-300 text-sm tracking-wider font-title">ORDER CATERING</a>
                </div>
            </div>
        </div>

        <!-- Copyright -->
        <div class="border-t border-secondary/20 mt-12 pt-6 text-center">
            <p class="text-xs">&copy; <span id="current-year"></span> FARMesilla. All rights reserved.</p>
        </div>
    </div>
</footer>

</body>
</html>
